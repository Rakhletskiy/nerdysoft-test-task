(this["webpackJsonptest-task"]=this["webpackJsonptest-task"]||[]).push([[0],{136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(11),l=a.n(r),i=a(8),u=a(26),c=a(3),o={users:null,isAuth:!1,currentUser:null,isRegister:!1};var m={currentTasks:null};var d=Object(u.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_REGISTER":return Object(c.a)({},e,{isRegister:t.isRegister});case"FETCH_DATA":return Object(c.a)({},e,{users:t.users});case"REG_NEW_USER":return Object(c.a)({},e,{users:t.users,isRegister:t.isRegister});case"LOGIN_USER":return Object(c.a)({},e,{currentUser:t.payload,isAuth:t.isAuth});case"LOGOUT_USER":return Object(c.a)({},e,{isAuth:t.payload});default:return e}},taskList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TASK_DATA":case"ADD_TASK":case"DEL_TASK":case"EDIT_TASK":return Object(c.a)({},e,{currentTasks:t.tasks});default:return e}}}),f=Object(u.c)(d),k=(a(91),a(92),function(e){var t=e.isRegister;return n.a.createElement("div",{className:"auth__title"},n.a.createElement("legend",null,t?"Registration":"Login"),n.a.createElement("span",null,t?"Create your account. It's free ;)":"Login to your account"))}),E=a(5),g=a(17),h=a(146),b=a(56),p=(a(93),function(e){return n.a.createElement("h3",{style:{color:e.color}},e.message)}),T=function(e,t,a){h.a.open({message:n.a.createElement(p,{message:e,color:a?"#00b200":"#E51616"}),description:t,duration:4,icon:n.a.createElement(b.a,{type:a?"smile":"frown",style:{color:a?"#00b200":"#E51616"}})})},_=function(){var e=localStorage.getItem("users");return JSON.parse(e)},v=function(e){var t=e.isRegister,a=e.loginText,s=e.password,r=e.confPassword,l=e.setLoginText,i=e.setPassword,u=e.setConfPassword,c=e.setValidatingField,o=e.setIsRegister,m=e.login,d=e.regNewUser;return t?n.a.createElement("button",{onClick:function(e){return d(e,a,s,r,l,i,u,c,o)},className:"auth__actions-submit-btn"},"register"):n.a.createElement("button",{onClick:function(e){return m(e,a,s,l,i)},className:"auth__actions-submit-btn"},"login")},N=function(e){var t=e.setIsRegister,a=e.isRegister;return n.a.createElement("button",{onClick:function(e){t(a,e)},className:"auth__actions-switch-btn"},a?"I have an account. Go to login page":"Sign up")},O=Object(i.b)(null,(function(e){return{setIsRegister:function(t,a){return e(function(e,t){return t.preventDefault(),{type:"SET_IS_REGISTER",isRegister:!e}}(t,a))},regNewUser:function(t,a,s,n,r,l,i,u,c){return e(function(e,t,a,s,n,r,l,i){var u=f.getState();e.preventDefault(),r(""),l("");var c,o=[],m=_(),d=null!==m?u.auth.users[u.auth.users.length-1].id:0;null!==m&&m.forEach((function(e){return c=e.login===t&&!0}));var k={id:d+1,login:t,password:a};null!==u.auth.users&&(o=Object(g.a)(u.auth.users));var E=function(e,t,a,s,n,r,l){var i=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);return n(""===e?1:""===t?2:""===a?3:i?null:4),t!==a&&""!==t&&""!==a&&""!==e&&i?(r("Error!","Type the identical passwords please",!1),!1):t.length<6&&t===a&&""!==t&&""!==a&&""!==e?(r("Error!","Password requires 6 or more characters",!1),!1):s?(r("Error!","This login already exists",!1),!1):""!==t&&""!==a&&""!==e&&i?(r("Success!","Thank you for registration! Now you can login in system.",!0),l(""),!0):void 0}(t,a,s,c,i,T,n);return E&&(o.push(k),localStorage.setItem("users",JSON.stringify(o))),{type:"REG_NEW_USER",users:0!==o.length?o:u.auth.users,isRegister:!E}}(t,a,s,n,r,l,i,u))},fetchData:function(){return e({type:"FETCH_DATA",users:_()})},login:function(t,a,s,n,r){return e(function(e,t,a,s,n){e.preventDefault();var r,l=f.getState();return null!==l.auth.users&&l.auth.users.forEach((function(e){e.login===t&&e.password===a&&(r=Object(c.a)({},e))})),r?(T("Success!","You logged in. Welcome!",!0),s(""),n("")):(T("Error!","Invalid login or password",!1),n("")),{type:"LOGIN_USER",payload:r,isAuth:!!r}}(t,a,s,n,r))}}}))((function(e){var t=Object(s.useState)(""),a=Object(E.a)(t,2),r=a[0],l=a[1],i=Object(s.useState)(""),u=Object(E.a)(i,2),c=u[0],o=u[1],m=Object(s.useState)(""),d=Object(E.a)(m,2),f=d[0],k=d[1],g=Object(s.useState)(null),h=Object(E.a)(g,2),b=h[0],p=h[1];Object(s.useEffect)((function(){_()}),[]);var T=e.isRegister,_=e.fetchData,O=e.login,S=e.setIsRegister,I=e.regNewUser;return n.a.createElement("fieldset",{className:"auth__actions"},n.a.createElement("label",{className:1===b?"required-message":4===b?"invalid-email":null},n.a.createElement("span",null,"E-mail:"),n.a.createElement("input",{onChange:function(e){return l(e.target.value)},value:r,type:"email",placeholder:"E-mail..."})),n.a.createElement("label",{className:2===b?"required-message":null},n.a.createElement("span",null,"Password:"),n.a.createElement("input",{onChange:function(e){return o(e.target.value)},value:c,type:"password",placeholder:"Password..."})),T&&n.a.createElement("label",{className:3===b?"required-message":null},n.a.createElement("span",null,"Confirm password:"),n.a.createElement("input",{onChange:function(e){return k(e.target.value)},value:f,type:"password",placeholder:"Password..."})),n.a.createElement(v,{isRegister:T,regNewUser:I,loginText:r,password:c,confPassword:f,setLoginText:l,setPassword:o,setConfPassword:k,setValidatingField:p,setIsRegister:S,login:O}),n.a.createElement(N,{setIsRegister:S,isRegister:T}))})),S=Object(i.b)((function(e){return{isRegister:e.auth.isRegister}}))((function(e){var t=e.isRegister;return n.a.createElement("form",{className:"auth"},n.a.createElement(k,{isRegister:t}),n.a.createElement(O,{isRegister:t}))})),I=a(145),w=(a(136),a(137),function(e){var t=e.logOut,a=e.name;return n.a.createElement("div",{className:"log-out"},n.a.createElement("span",{className:"log-out__name"},a),n.a.createElement(b.a,{onClick:function(){return t()},className:"log-out__icon",type:"logout",size:"large"}))}),y=(a(138),a(139),function(e){var t=e.label,a=e.userId,s=e.taskIndex,r=e.setIsSharing,l=e.destinationEmail,i=e.setDestinationEmail;return n.a.createElement("div",{className:"share-block-wrapper"},n.a.createElement("div",{className:"share-block"},n.a.createElement("h2",null,"share task"),n.a.createElement("span",null,"User e-mail for share ",n.a.createElement("span",null,'"',t,'"')," task:"),n.a.createElement("input",{onChange:function(e){return i(e.target.value)},value:l,placeholder:"E-mail...",autoFocus:!0}),n.a.createElement("button",{onClick:function(){return function(e,t,a,s,n,r){s("");var l=_(),i=l[t-1].tasks,u=l.filter((function(t){return t.login===e})),c=l.filter((function(e){return e.id===t})),o=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e),m=[];l.forEach((function(t){t.login===e&&t.sharedTasks&&(m=t.sharedTasks&&i[a]&&t.sharedTasks.filter((function(e){return e.task&&e.task.id===i[a].id&&e.task.label===i[a].label&&e})))})),0!==u.length&&!u[0].sharedTasks&&o&&(u[0].sharedTasks=[]),e.length>0&&o&&0!==u.length&&u[0].login!==c[0].login&&0===m.length?(u[0].sharedTasks.push({from:l[t-1].login,task:i[a]}),l.splice(u[0].id-1,1,u[0]),localStorage.setItem("users",JSON.stringify(l)),T("Success!","Task >> ".concat(r," << shared successfully"),!0),n(!1)):0===u.length&&o?T("Error!","User is not register in system",!1):o?u[0].login===c[0].login?T("Error!","Task can not shared for self!",!1):0!==m.length?T("Error!","This task already shared with this user",!1):0===e.length&&T("Error!","Please type the user email address for share",!1):T("Error!","Invalid e-mail format",!1)}(l,a,s,i,r,t)}},"SHARE"),n.a.createElement(b.a,{onClick:function(){return r(!1)},className:"share-block__close-btn",type:"close"})))}),j=function(e){var t=e.setEditedTask,a=e.editedTask,s=e.label,r=e.taskIndex,l=e.userId,i=e.taskId,u=e.onEditTask,c=e.setIsEditing;return n.a.createElement("div",{className:"task-list__tasks-item-edit-block"},n.a.createElement("input",{onChange:function(e){return t(e.target.value)},value:a||s,autoFocus:!0}),n.a.createElement("button",{onClick:function(){return u(r,l,i,a,c)}},"OK"))},R=Object(i.b)((function(e){return{userId:e.auth.currentUser.id}}),(function(e){return{onDelTask:function(t,a){return e(function(e,t){var a=f.getState(),s=_(),n=Object(g.a)(a.taskList.currentTasks),r=n[e].from;return s.forEach((function(a){a.id===t&&a.sharedTasks?a.sharedTasks.forEach((function(t,s){return t.id===n[e].id&&a.sharedTasks.splice(s,1)})):a.login!==r||a.sharedTasks||a.tasks.forEach((function(t,s){return n[e].task.id===t.id&&n[e].task.label===t.label&&a.tasks.splice(s,1)}))})),n.splice(e,1),s[t-1].tasks=n,localStorage.setItem("users",JSON.stringify(s)),{type:"DEL_TASK",tasks:n}}(t,a))},onEditTask:function(t,a,s,n,r){return e(function(e,t,a,s,n){var r=f.getState();n(!1);var l=_(),i=Object(g.a)(r.taskList.currentTasks),u=i[e].from,c=!!u,o=l[t-1].sharedTasks&&Object(g.a)(l[t-1].sharedTasks);if(c){var m,d=l.filter((function(e){return e.login===u})),k=c&&d[0].tasks.map((function(e){return e.id===a?{id:e.id,label:s}:e}));l[d[0].id-1].tasks=k,o.forEach((function(e,t){return m=e.task.id===a&&t})),o.splice(m,1,{from:u,task:{id:a,label:s}}),l[t-1].sharedTasks=o,i.splice(e,1,{from:u,task:{id:a,label:s}})}else{i.splice(e,1,{id:a,label:s});var E=i.filter((function(e){return!e.from&&e}));l[t-1].tasks=E}return localStorage.setItem("users",JSON.stringify(l)),{type:"EDIT_TASK",tasks:i}}(t,a,s,n,r))}}}))((function(e){var t=Object(s.useState)(!1),a=Object(E.a)(t,2),r=a[0],l=a[1],i=Object(s.useState)(!1),u=Object(E.a)(i,2),c=u[0],o=u[1],m=Object(s.useState)(null),d=Object(E.a)(m,2),f=d[0],k=d[1],g=Object(s.useState)(""),h=Object(E.a)(g,2),p=h[0],T=h[1],_=e.label,v=e.taskIndex,N=e.userId,O=e.taskId,S=e.onEditTask,I=e.shared,w=e.onDelTask;return n.a.createElement("li",{className:"task-list__tasks-item"},r?n.a.createElement(j,{setEditedTask:k,editedTask:f,label:_,taskIndex:v,userId:N,taskId:O,onEditTask:S,setIsEditing:l}):n.a.createElement("div",null,n.a.createElement("span",{className:"task-list__tasks-item-label"},_),c&&n.a.createElement(y,{label:_,setIsSharing:o,taskIndex:v,userId:N,destinationEmail:p,setDestinationEmail:T})),I?n.a.createElement("span",{className:"task-list__tasks-item-shared"},"shared"):n.a.createElement(b.a,{onClick:function(){return o(!c)},className:"task-list__tasks-item-share-btn",type:"share-alt"}),n.a.createElement(b.a,{onClick:function(){return l(!r)},className:"task-list__tasks-item-edit-btn",type:"edit"}),n.a.createElement(b.a,{onClick:function(){return w(v,N)},className:"task-list__tasks-item-del-btn",type:"delete"}))})),A=function(e){var t=e.onAddNewTask,a=e.userId,s=e.taskText,r=e.setTaskText;return n.a.createElement("div",{className:"task-list__add-block"},n.a.createElement("input",{onChange:function(e){return r(e.target.value)},value:s,placeholder:"New task..."}),n.a.createElement("button",{onClick:function(){return t(a,s,r)}},"ADD"))},C=(a(140),function(e){var t=e.setIsFullList,a=e.tasks;return n.a.createElement("div",{onClick:function(){return t(!1)},className:"full-list"},n.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"full-list__inner"},n.a.createElement("h2",{className:"full-list__title"},"Full list of tasks"),n.a.createElement("div",{className:"full-list__total-count"},"Number of tasks:",n.a.createElement("b",null,a&&a.length?a.length:"0")),a&&a.length>0?n.a.createElement("ul",null,a.map((function(e,t){return n.a.createElement("li",{className:"full-list__item",key:t},n.a.createElement("div",{className:"full-list__item-label"},e.from?e.task.label:e.label),n.a.createElement("div",{className:"full-list__item-from"},e.from?n.a.createElement("span",null,"from:"):null," ",e.from?n.a.createElement("span",null,e.from):null))}))):n.a.createElement(I.a,{className:"full-list__no-data"}),n.a.createElement(b.a,{onClick:function(){return t(!1)},className:"full-list__close-btn",type:"close"})))}),D=Object(i.b)((function(e){return{name:e.auth.currentUser.login,userId:e.auth.currentUser.id,tasks:e.taskList.currentTasks}}),(function(e){return{logOut:function(){return e({type:"LOGOUT_USER"})},onAddNewTask:function(t,a,s){return e(function(e,t,a){var s=f.getState();a("");var n=null!=s.taskList.currentTasks?Object(g.a)(s.taskList.currentTasks):[],r=n.filter((function(e){return!e.from&&e})),l=Object(g.a)(s.auth.users),i=Object(c.a)({},s.auth.users[e-1]);return""!==t&&(r.push({id:n.length>0?n[n.length-1].id+1:1,label:t}),n.push({id:n.length>0?n[n.length-1].id+1:1,label:t}),l.splice(e-1,1,i),i.tasks=r,localStorage.setItem("users",JSON.stringify(l))),{type:"ADD_TASK",tasks:n}}(t,a,s))},fetchTasksData:function(t){return e(function(e){var t=_();return{type:"FETCH_TASK_DATA",tasks:null!==t&&t[e-1].sharedTasks&&!t[e-1].tasks?t[e-1].sharedTasks:null!==t&&t[e-1].sharedTasks&&t[e-1].tasks?t[e-1].sharedTasks.concat(t[e-1].tasks):null!==t?t[e-1].tasks:[]}}(t))}}}))((function(e){var t=Object(s.useState)(""),a=Object(E.a)(t,2),r=a[0],l=a[1],i=Object(s.useState)(!1),u=Object(E.a)(i,2),c=u[0],o=u[1];Object(s.useEffect)((function(){m(d)}),[]);var m=e.fetchTasksData,d=e.userId,f=e.tasks,k=e.onAddNewTask,g=e.logOut,h=e.name;return n.a.createElement("div",{className:"task-list"},n.a.createElement("div",{className:"task-list-inner"},n.a.createElement("h1",{className:"task-list__title"},"Task list"),n.a.createElement(b.a,{onClick:function(){return o(!0)},className:"task-list__list-btn",type:"unordered-list"}),n.a.createElement("ul",{className:"task-list__tasks"},f?f.map((function(e,t){return n.a.createElement(R,{shared:!!e.from,label:e.from?e.task.label:e.label,from:e.from||null,taskIndex:t,userId:d,taskId:e.from?e.task.id:e.id,key:t})})):n.a.createElement(I.a,{className:"task-list__empty"})),n.a.createElement(A,{taskText:r,setTaskText:l,userId:d,onAddNewTask:k})),c&&n.a.createElement(C,{tasks:f,setIsFullList:o}),n.a.createElement(w,{name:h,logOut:g}))})),U=Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(e){return n.a.createElement("div",{className:"task-list-app"},e.isAuth?n.a.createElement(D,null):n.a.createElement(S,null))}));l.a.render(n.a.createElement(i.a,{store:f},n.a.createElement(U,null)),document.getElementById("root"))},82:function(e,t,a){e.exports=a(144)},91:function(e,t,a){},92:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.6227894d.chunk.js.map